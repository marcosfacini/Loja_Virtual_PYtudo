{% extends 'base.html' %}
{% load static %}
{% load filtros %}

{% block 'title' %}PYTudo{% endblock %}

{% block 'head' %} 
    <link href="{% static 'produtos/css/listar_categorias.css' %}" rel="stylesheet">
{% endblock %}

{% block 'body' %}

    <h2 class="titulo">Categorias</h2>
    
    <form action="#" method="GET"> {% csrf_token %} 
        <div class="row">
            
        <div class="col-md-5">
            <input type="text" placeholder="Busque pelo nome" class="form-control" name="nome">
        </div>
    
        <div class="col-md-3">
            <input type="submit" value="FILTRAR" class="btn btn-primary">
        </div>
        </div>
    </form>

    <br>
    <br>

    <form action="{% url 'cadastrar_categoria' %}" method="POST"> {% csrf_token %} 
        <div class="row">
            
        <div class="col-md-5">
            <label>Cadastrar nova categoria</label>
            <input type="text" class="form-control" name="nome" maxlength="40">
        </div>
    
        <div class="col-md-3">
            <input type="submit" value="SALVAR" class="btn btn-primary">
        </div>
        </div>
    </form>
    
    <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Nome</th>
            <th scope="col">Excluir</th>
          </tr>
        </thead>
    
        <tbody>
            {% for categoria in categorias %}
                <tr> 
                    <td>{{categoria.nome}}</td> 
                    <td><a href="{% url 'excluir_categoria' categoria.id %}">Excluir</a></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br>
    <br>
    <div class="pagination">
        {% if categorias.has_previous %}
            <a href="?{% param_replace page=1 %}">First</a>
            {% if categorias.previous_page_number != 1 %}
                <a href="?{% param_replace page=categorias.previous_page_number %}">Previous</a>
            {% endif %}
        {% endif %}

        Page {{ categorias.number }} of {{ paginator.num_pages }} 

        {% if categorias.has_next %}
            {% if categorias.next_page_number != paginator.num_pages %}
                <a href="?{% param_replace page=categorias.next_page_number %}">Next</a>
            {% endif %}
            <a href="?{% param_replace page=paginator.num_pages %}">Last</a>
        {% endif %}

        <p>Objects {{ categorias.start_index }}â€”{{ categorias.end_index }}</p>
        
    </div> 

    
    

{% endblock %}